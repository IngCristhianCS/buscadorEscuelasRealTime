var marker;var marker1;var start;var end;var map;var fenway;function inicializa(){var g=new google.maps.DirectionsService;var d=new google.maps.DirectionsRenderer;
var f=parseFloat(document.getElementById("latitud").value);var c=parseFloat(document.getElementById("longitud").value);var h=parseFloat(document.getElementById("heading").value);
var a=parseFloat(document.getElementById("pitch").value);fenway={lat:f,lng:c};map=new google.maps.Map(document.getElementById("map"),{center:fenway,scrollwheel:false,zoom:12,streetViewControl:false,mapTypeControlOptions:{position:google.maps.ControlPosition.BOTTOM_LEFT}});
d.setMap(map);var b=new google.maps.StreetViewPanorama(document.getElementById("pano"),{position:fenway,zoom:1,scrollwheel:false,pov:{heading:h,pitch:a,},disableDefaultUI:true});
map.setStreetView(b);var e=document.getElementById("save-widget");map.controls[google.maps.ControlPosition.TOP_LEFT].push(e);marker=new google.maps.Marker({map:map,position:fenway,animation:google.maps.Animation.DROP,title:"Direccion de Educacion"});
marker.addListener("click",function(){map.setZoom(15);map.setCenter(marker.getPosition());});if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(i){var j={lat:i.coords.latitude,lng:i.coords.longitude};
marker1=new google.maps.Marker({map:map,position:j,draggable:true,animation:google.maps.Animation.DROP,title:"Mi Ubicacion"});calculateAndDisplayRoute(g,d);
document.getElementById("mode").addEventListener("change",function(){calculateAndDisplayRoute(g,d);});marker1.addListener("dragend",function(){calculateAndDisplayRoute(g,d);
});infoWindow.setPosition(j);infoWindow.setContent("Location found.");map.setCenter(j);},function(){handleLocationError(true,infoWindow,map.getCenter());
});}else{handleLocationError(false,infoWindow,map.getCenter());}}function calculateAndDisplayRoute(b,a){var c=document.getElementById("mode").value;end=new google.maps.LatLng(marker.position.lat(),marker.position.lng());
start=new google.maps.LatLng(marker1.position.lat(),marker1.position.lng());b.route({origin:start,destination:end,travelMode:google.maps.TravelMode[c]},function(e,d){if(d==google.maps.DirectionsStatus.OK){a.setDirections(e);
}else{window.alert("Directions request failed due to "+d);}});}function handleLocationError(a,b,c){b.setPosition(c);b.setContent(a?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation.");
}