$(document).ready(function(){var c;var k="ws:"+window.location.hostname+":12345";websocket=new WebSocket(k);var f;websocket.onopen=function(m){console.log("Connectado !!!");
};websocket.onerror=function(m){console.log("Error Occurred "+m.data);};websocket.onclose=function(m){console.log("Connection Closed");};websocket.onmessage=function(s){var o=JSON.parse(s.data);
var q=o.mensaje;var r=o.usuario;var p=o.direccion;var m=o.id;var n=o.tabla;var u=o.tdtabla;var t=o.accion;if(!r){r="system";}else{j(q,r,p,m,n,t);d(q,r,p,m,n,t);
}};function j(o,q,n,s,r,m){if(r=="Escuela"){var p="valor="+s;$.ajax({type:"POST",url:"http://"+window.location.hostname+"/ixtapaluca"+"/php/bsc.php?t=EscuelaSuper",data:p,success:function(t){if(t==0){if($("#Escuela"+s).length){($("#Escuela"+s)).addClass("label-danger");
($("#Escuela"+s)).fadeOut(1000);}}else{l(s,r,t,m);i(o,q,n,m);}}});}}function d(p,q,o,s,r,n){if(r=="Escuela"||r=="Ubicacion"){var m="valor="+s+"&campo=cct&nombre";
$.ajax({type:"POST",url:"http://"+window.location.hostname+"/ixtapaluca"+"/php/bsc.php?t=EscuelaG",data:m,success:function(u){var v="con CCT "+s+" y Nombre "+u;o="/detalles/"+s;
if(n=="eli"){p="Se Elimino la Escuela "+v;}else{if(n=="act"){p="Se Actualizo la Escuela "+v;}else{p="Se Registro la Escuela "+v;}}var t="valor="+s+"&campo=cct&socket";
$.ajax({type:"POST",url:"http://"+window.location.hostname+"/ixtapaluca"+"/php/bsc.php?t=EscuelaG",data:t,success:function(w){g(s,"Escuela",w,n);e(s);i(p,q,o,n);}});
}});}}function e(n){var m="valor="+n;$.ajax({type:"POST",url:"http://"+window.location.hostname+"/ixtapaluca"+"/php/bsc.php?t=Detalles",data:m,success:function(o){$("#detalles").html(o);
($("#informacion")).addClass("label-warning");}});}function i(o,p,n,m){if(Notification){if(Notification.permission!=="granted"){Notification.requestPermission();
}else{return h(o,p,n,m);}}else{return a(o,p,n,m);}return a(o,p,n,m);}function g(p,o,n,m){if($("#"+o+"G"+p).length){if(m=="eli"){($("#"+o+"G"+p)).addClass("label-danger");
($("#"+o+"G"+p)).fadeOut(1000);}else{if(m=="act"){($("#"+o+"G"+p)).addClass("label-warning");$("#"+o+"G"+p).html(n);}}}else{$('<tr id="'+o+"G"+p+'"> '+n+" </tr>").prependTo("#resultado"+o+"G");
if(m=="act"){($("#"+o+"G"+p)).addClass("label-warning");}else{($("#"+o+"G"+p)).addClass("label-primary");}}}function l(p,o,n,m){if($("#Escuela"+p).length){if(m=="eli"){($("#Escuela"+p)).addClass("label-danger");
($("#Escuela"+p)).fadeOut(1000);}else{if(m=="act"){($("#Escuela"+p)).addClass("label-warning");$("#Escuela"+p).html(n);}}}else{$('<tr id="Escuela'+p+'"> '+n+" </tr>").prependTo("#resultadoEscuela");
($("#Escuela"+p)).addClass("label-primary");}}function a(o,p,n,s,r,m){alertify.set("notifier","position","top-right");var q=alertify.notify('<img style="width:70px;" src="http://'+window.location.hostname+"/ixtapaluca"+'/img/logow.ico">'+p+"<br>"+o).dismissOthers();
q.callback=function(t){if(t){b(n);}else{console.log("dismissed");}};}function h(q,s,o,m,n,u){var t="Educacion Ixtapaluca";var p={icon:"http://"+window.location.hostname+"/ixtapaluca"+"/img/logow.ico",body:s+"\n "+q,dir:"auto",lang:"ES",tag:m,vibrate:[200,100,200]};
var r=new Notification(t,p);r.onshow=function(){console.log("Notificación: show");};r.onclick=function(){b(o);r.close();};r.onerror=function(){console.log("Notificación: error");
};r.onclose=function(){console.log("Notificación: close");};setTimeout(function(){r.close();},10000);}function b(m){window.location.href=m;}});