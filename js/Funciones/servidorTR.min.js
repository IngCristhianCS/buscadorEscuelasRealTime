$(document).ready(function(){var d;var i="ws:"+window.location.hostname+":12345";websocket=new WebSocket(i);var e;websocket.onopen=function(k){console.log("Connectado !!!");
};websocket.onerror=function(k){console.log("Error Occurred "+k.data);};websocket.onclose=function(k){console.log("Connection Closed");};websocket.onmessage=function(q){var m=JSON.parse(q.data);
var o=m.mensaje;var p=m.usuario;var n=m.direccion;var k=m.id;var l=m.tabla;var s=m.tdtabla;var r=m.accion;if(!p){p="system";}else{h(o,p,n,k,l,r);}};function h(m,o,l,q,p,k){var n="valor="+q+"&tabla="+p;
$.ajax({type:"POST",url:"http://"+window.location.hostname+"/ixtapaluca"+"/php/bsc.php?t=Administrador",data:n,success:function(r){j(q,p,r,k);if(p=="Escuela"||p=="Ubicacion"){a(q);
}g(m,o,l,k);}});}function j(n,m,l,k){if($("#"+m+n).length){if(k=="eli"){($("#"+m+n)).addClass("label-danger");($("#"+m+n)).fadeOut(1000);}else{if(k=="act"){($("#"+m+n)).addClass("label-warning");
$("#"+m+n).html(l);}}}else{$('<tr id="'+m+n+'"> '+l+" </tr>").prependTo("#resultado"+m);if(k=="act"){($("#"+m+n)).addClass("label-warning");}else{($("#"+m+n)).addClass("label-primary");
}}}function a(l){var k="valor="+l;$.ajax({type:"POST",url:"http://"+window.location.hostname+"/ixtapaluca"+"/php/bsc.php?t=Detalles",data:k,success:function(m){$("#detalles").html(m);
($("#informacion")).addClass("label-warning");}});}function g(m,n,l,k){if(Notification){if(Notification.permission!=="granted"){Notification.requestPermission();
}else{return f(m,n,l,k);}}else{return b(m,n,l,k);}return b(m,n,l,k);}function b(m,n,l,q,p,k){alertify.set("notifier","position","top-right");var o=alertify.notify('<img style="width:70px;" src="http://'+window.location.hostname+"/ixtapaluca"+'/img/logow.ico">'+n+"<br>"+m).dismissOthers();
o.callback=function(r){if(r){c(l);}else{console.log("dismissed");}};}function f(o,q,m,k,l,s){var r="Educacion Ixtapaluca";var n={icon:"http://"+window.location.hostname+"/ixtapaluca"+"/img/logow.ico",body:q+"\n "+o,dir:"auto",lang:"ES",tag:k,vibrate:[200,100,200]};
var p=new Notification(r,n);p.onshow=function(){console.log("Notificación: show");};p.onclick=function(){c(m);p.close();};p.onerror=function(){console.log("Notificación: error");
};p.onclose=function(){console.log("Notificación: close");};setTimeout(function(){p.close();},10000);}function c(k){window.location.href=k;}});